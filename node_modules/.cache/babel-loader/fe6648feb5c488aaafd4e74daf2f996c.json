{"ast":null,"code":"import { Router } from 'react-router';\nexport function makeRequest(opts) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(opts.method, opts.url);\n\n    xhr.onload = function () {\n      if (401 == this.status) {}\n\n      if (this.status >= 200 && this.status < 300) {\n        resolve(xhr.response);\n      } else {\n        reject({\n          status: this.status,\n          statusText: xhr.statusText\n        });\n      }\n    };\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4 && xhr.status == 401) {\n        reject({\n          status: 'failure',\n          statusText: \"Unauthorized\"\n        });\n      }\n    };\n\n    xhr.onerror = function () {\n      if (401 == this.status) {}\n\n      reject({\n        status: this.status,\n        statusText: xhr.statusText\n      });\n    };\n\n    if (opts.headers) {\n      Object.keys(opts.headers).forEach(function (key) {\n        xhr.setRequestHeader(key, opts.headers[key]);\n      });\n    }\n\n    var data = opts.data;\n\n    if (data && typeof data === 'object') {\n      data = Object.keys(data).map(function (key) {\n        return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n      }).join('&');\n    }\n\n    xhr.send(data);\n  });\n}","map":{"version":3,"sources":["D:\\Projects\\ReactProjects\\ReactTemplet\\src\\RequestService.js"],"names":["Router","makeRequest","opts","Promise","resolve","reject","xhr","XMLHttpRequest","open","method","url","onload","status","response","statusText","onreadystatechange","readyState","onerror","headers","Object","keys","forEach","key","setRequestHeader","data","map","encodeURIComponent","join","send"],"mappings":"AAAA,SAAQA,MAAR,QAAqB,cAArB;AACA,OAAQ,SAASC,WAAT,CAAsBC,IAAtB,EAA4B;AAClC,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAASN,IAAI,CAACO,MAAd,EAAsBP,IAAI,CAACQ,GAA3B;;AACAJ,IAAAA,GAAG,CAACK,MAAJ,GAAa,YAAY;AACvB,UAAG,OAAO,KAAKC,MAAf,EAAsB,CACrB;;AACD,UAAI,KAAKA,MAAL,IAAe,GAAf,IAAsB,KAAKA,MAAL,GAAc,GAAxC,EAA6C;AAC3CR,QAAAA,OAAO,CAACE,GAAG,CAACO,QAAL,CAAP;AACD,OAFD,MAEO;AACLR,QAAAA,MAAM,CAAC;AACLO,UAAAA,MAAM,EAAE,KAAKA,MADR;AAELE,UAAAA,UAAU,EAAER,GAAG,CAACQ;AAFX,SAAD,CAAN;AAID;AACF,KAXD;;AAYAR,IAAAA,GAAG,CAACS,kBAAJ,GAAuB,YAAU;AAC/B,UAAGT,GAAG,CAACU,UAAJ,IAAgB,CAAhB,IAAqBV,GAAG,CAACM,MAAJ,IAAY,GAApC,EACA;AACGP,QAAAA,MAAM,CAAC;AACNO,UAAAA,MAAM,EAAE,SADF;AAENE,UAAAA,UAAU,EAAC;AAFL,SAAD,CAAN;AAIF;AAEF,KATD;;AAUAR,IAAAA,GAAG,CAACW,OAAJ,GAAc,YAAY;AACxB,UAAG,OAAO,KAAKL,MAAf,EAAsB,CAErB;;AACDP,MAAAA,MAAM,CAAC;AACLO,QAAAA,MAAM,EAAE,KAAKA,MADR;AAELE,QAAAA,UAAU,EAAER,GAAG,CAACQ;AAFX,OAAD,CAAN;AAID,KARD;;AASA,QAAIZ,IAAI,CAACgB,OAAT,EAAkB;AAChBC,MAAAA,MAAM,CAACC,IAAP,CAAYlB,IAAI,CAACgB,OAAjB,EAA0BG,OAA1B,CAAkC,UAAUC,GAAV,EAAe;AAC/ChB,QAAAA,GAAG,CAACiB,gBAAJ,CAAqBD,GAArB,EAA0BpB,IAAI,CAACgB,OAAL,CAAaI,GAAb,CAA1B;AACD,OAFD;AAGD;;AACD,QAAIE,IAAI,GAAGtB,IAAI,CAACsB,IAAhB;;AACA,QAAIA,IAAI,IAAI,OAAOA,IAAP,KAAgB,QAA5B,EAAsC;AACpCA,MAAAA,IAAI,GAAGL,MAAM,CAACC,IAAP,CAAYI,IAAZ,EAAkBC,GAAlB,CAAsB,UAAUH,GAAV,EAAe;AAC1C,eAAOI,kBAAkB,CAACJ,GAAD,CAAlB,GAA0B,GAA1B,GAAgCI,kBAAkB,CAACF,IAAI,CAACF,GAAD,CAAL,CAAzD;AACD,OAFM,EAEJK,IAFI,CAEC,GAFD,CAAP;AAGD;;AAEDrB,IAAAA,GAAG,CAACsB,IAAJ,CAASJ,IAAT;AACD,GA/CM,CAAP;AAgDD","sourcesContent":["import {Router} from 'react-router'\r\nexport  function makeRequest (opts) { \r\n  return new Promise(function (resolve, reject) {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open(opts.method, opts.url);\r\n    xhr.onload = function () {\r\n      if(401 == this.status){\r\n      }\r\n      if (this.status >= 200 && this.status < 300) {\r\n        resolve(xhr.response);\r\n      } else {\r\n        reject({\r\n          status: this.status,\r\n          statusText: xhr.statusText\r\n        });\r\n      }\r\n    };\r\n    xhr.onreadystatechange=function(){\r\n      if(xhr.readyState==4 && xhr.status==401)\r\n      {\r\n         reject({\r\n          status: 'failure',\r\n          statusText:\"Unauthorized\"\r\n        });\r\n      }\r\n      \r\n    }\r\n    xhr.onerror = function () {\r\n      if(401 == this.status){\r\n        \r\n      }\r\n      reject({\r\n        status: this.status,\r\n        statusText: xhr.statusText\r\n      });\r\n    };\r\n    if (opts.headers) {\r\n      Object.keys(opts.headers).forEach(function (key) {\r\n        xhr.setRequestHeader(key, opts.headers[key]);\r\n      });\r\n    }\r\n    var data = opts.data;\r\n    if (data && typeof data === 'object') {\r\n      data = Object.keys(data).map(function (key) {\r\n        return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\r\n      }).join('&');\r\n    }\r\n   \r\n    xhr.send(data);    \r\n  });\r\n}\r\n\r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}